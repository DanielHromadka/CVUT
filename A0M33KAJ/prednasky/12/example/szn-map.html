<template>
	<style>
		:host {
			display: block;
		}
		.smap {
			width: 100%;
			height: 100%;
		}
	</style>
	<div></div>
</template>

<script src="//api4.mapy.cz/loader.js"></script>
<script>
(function() {
	var template = document.currentScript.ownerDocument.querySelector("template");

	var proto = Object.create(HTMLDivElement.prototype);

	proto.createdCallback = function() { 
		this.style.width = this.getAttribute("width") + "px";
		this.style.height = this.getAttribute("height") + "px";

		var root = (this.createShadowRoot || this.webkitCreateShadowRoot).call(this);
		root.appendChild(template.content.cloneNode(true));
		var map = new SMap(root.querySelector("div"));
		map.addDefaultLayer(SMap.DEF_BASE).enable();
	}

	var register = function() {
		console.DEBUG = 1;
		document.registerElement("szn-map", {prototype:proto});
	}
	Loader.async = true;
	Loader.load(null, {}, register);
})();
</script>
