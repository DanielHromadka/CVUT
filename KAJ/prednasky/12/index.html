<!-- css grid, offline / service worker -->
<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" type="text/css" href="../../common/syntax/syntax.css" />
		<link rel="stylesheet" type="text/css" href="../../common/css/slides2.css" />
		<link rel="stylesheet" type="text/css" href="../../common/css/skin/cvut/skin.css" />
		<script src="../../common/js/oz.js" type="text/javascript"></script>
		<script src="../../common/js/slides2.js" type="text/javascript"></script>
		<script src="../../common/syntax/syntax.js" type="text/javascript"></script>
		<meta name="viewport" content="width=device-width,user-scalable=0" />
		<title>Bleeding edge</title>
	<body>

<h1>Bleeding edge</h1>

<section class="slide">
	<h2>Bleeding edge</h2>
	<ul>
		<li>Webová interaktivní prezentace</li>
		<li>"?" zobrazí krátkou nápovědu</li>
		<li>Tisk jako obvykle</li>
		<li>Pro pokračování stiskněte mezerník</li>
	</ul>
</section>

<section class="slide">
	<h2>Obsah</h2>
	<ol>
		<li>CSS: FlexBox</li>
		<li>CSS: Custom Properties</li>
		<li>JS: WebRTC</li>
		<li>JS: Web Notifications</li>
		<li>JS: Web Components</li>
	</ol>
</section>

<section class="slide">
	<h2>CSS3 Custom Properties</h2>
	<pre data-syntax="css">
body {
	--main-bg-color: brown;
}

div {
	background-color: var(--main-bg-color);
}

a {
	/* default value */
	background-color: var(--main-bg-color, red);
}
</pre>
</section>

<section class="slide">
	<h2>CSS3 Custom Properties</h2>
	<ul>
		<li>Někdy nazýváno <em>CSS Variables</em></li>
		<li>Shodné chování s ostatními vlastnostmi (kaskáda)</li>
		<li>Druhý parametr funkce <code>var()</code> je výchozí hodnota, pokud by vlastnost neexistovala</li>
		<li>Hodnoty lze měnit za běhu (JS API, media queries, &hellip;)</li>
	</ul>
</section>

<section class="slide">
	<h2>CSS3 Custom Properties</h2>
	<ul>
		<li>Nelze polyfillovat ani preprocessovat &ndash; hodnoty se v čase mění</li>
		<li>Užitečné pro <em>skinování</em></li>
		<li>Užitečné pro modularizaci a izolaci CSS komponent</li>
	</ul>
</section>

<section class="slide">
	<h2>WebRTC</h2>
	<ul>
		<li>RTC = Real Time Communications</li>
		<li>Technologie pro komunikaci mezi klienty (bez serveru)</li>
		<li>Primárně přenos zvuku a obrazu, sekundárně JS dat</li>
		<li>Obtížné navázání spojení (tzv. <em>signalling</em> &ndash; nutný server pro iniciální sestavení)</li>
	</ul>
</section>

<section class="slide">
	<h2>WebRTC: getUserMedia</h2>
	<ul>
		<li><code>navigator.getUserMedia()</code></li>
		<li>Nejlépe podporovaná komponenta WebRTC</li>
		<li>Přístup ke kameře a mikrofonu</li>
		<li>Prefixované varianty</li>
	</ul>
</section>

<section class="slide">
	<h2>WebRTC: getUserMedia</h2>
	<pre data-syntax="js">
var ok = function(stream) {
	var url = window.URL.createObjectURL(stream);
	video.src = url;
	video.play();
}

var error = function(e) {
	alert(e);
}

navigator.getUserMedia({audio:true, video:true}, ok, error);
</pre>
	<p><a target="_blank" href="http://jsfiddle.net/ondras/6fgu4/">Ukázka</a></p>
</section>

<section class="slide">
	<h2>Web Notifications</h2>
	<ul>
		<li>Zobrazení upozornění na úrovni OS</li>
		<li>Spolupráce s notifikačním systémem OS</li>
		<li>Agresivní; nutný souhlas uživatele</li>
		<li><code data-syntax="js">var notification = new Notification(title, options)</code></li>
	</ul>
</section>

<section class="slide">
	<h2>Web Notifications</h2>
	<ul>
		<li>Options: jazyk, tělíčko, ikona</li>
		<li>Notifikace generuje události, lze ji programově zavřít</li>
		<li>Souhlas uživatele lze získat asynchronním voláním <code>Notification.requestPermission</code></li>
		<li><a target="_blank" href="https://developer.mozilla.org/en/docs/Web/API/notification">Ukázka na MDN</a></li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components</h2>
	<ul>
		<li>Souhrnný termín pro čtveřici oddělených standardů</li>
		<li>Fungují nezávisle, ale jsou cíleně navrhovány pro společné použití</li>
		<li>Silně experimentální</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: &lt;template&gt;</h2>
	<ul>
		<li><pre data-syntax="xml">&lt;template&gt;
	&lt;div class="person"&gt;&lt;img /&gt;&lt;/div&gt;
	&lt;script&gt;new Person(...)&lt;/script&gt;
&lt;/template&gt;
</pre></li>
		<li>Dle slov autorů <em>něco jako chytřejší &lt;script type="custom"&gt;</em></li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: &lt;template&gt;</h2>
	<ul>
		<li>"Mrtvý" prvek; má DOM, ale nevykonávají se skripty a nestahují se externí média</li>
		<li>DOM API: template má vlastnost <code>content</code>, což je DocumentFragment</li>
		<li><pre data-syntax="js">var template = document.querySelector("template");
var parent = document.body;

parent.appendChild(template.content.cloneNode(true));</pre></li>
		<li>Vnitřek template musí být parsovatelné HTML, ale jeho forma není předepsaná</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: HTML imports</h2>
	<ul>
		<li><pre data-syntax="xml">&lt;head&gt;
	&lt;link rel="import" href="/path/to/stuff.html" /&gt;
&lt;/head&gt;
</pre></li>
		<li>Paralela pro CSS <code>@import</code></li>
		<li>Podléhá CORS</li>
		<li>Prohlížeč inteligentně deduplikuje</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: HTML imports</h2>
	<ul>
		<li>Každý importovaný soubor tvoří samostatný DOM dokument</li>
		<li>Na rozdíl od &lt;template&gt; je živý a skripty v něm se vykonávají</li>
		<li>Importovaný obsah se nikam automaticky nepřipojuje</li>
		<li>Rodič (ručně) připojuje importovaný obsahu (či naopak)</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: využití HTML imports</h2>
	<ul>
		<li>Zapouzdření libovolně objemné fcionality</li>
		<li>Widgety, komponenty aplikace, moduly, &hellip;</li>
		<li>Vhodné i pro import čistě JS-based komponent</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: Custom Elements</h2>
	<pre data-syntax="xml">&lt;szn-map x="..." y="..." controls="keyboard mouse zoom pan" /&gt;</pre>
	<pre data-syntax="js">var map1 = new SznMap({x:..., y:..., control: ...});
var map2 = document.createElement("szn-map");

document.body.appendChild(map1);
map1.appendChild(map2);
</pre>
</section>

<section class="slide">
	<h2>Web Components: Custom Elements &ndash; registerElement</h2>
	<ul>
		<li>JS API tvořeno jedinou funkcí: <br/> <code data-syntax="js">var SznMap = document.registerElement("szn-map", descriptor);</code></li>
		<li>Vlastní značky musí mít v názvu pomlčku (dopředná kompatibilita)</li>
		<li>Značka s pomlčkou v názvu je tzv. <em>unresolved element</em> (<code>instanceof HTMLElement</code>), dokud nedojde k registraci</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: Custom Element descriptor</h2>
	<ul>
		<li>Deskriptor (druhý parametr <code>registerElement</code>) popisuje chování značky</li>
		<li>Musí obsahovat klíč <em>prototype</em>, definující prototyp JS API nové značky</li>
		<li>Může obsahovat klíč <em>extends</em>, string s názvem rozšiřované značky</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: Custom Element callbacky</h2>
	<ul>
		<li>V prototypu značky lze definovat callbacky životního cyklu značky</li>
		<li><code>createdCallback</code> vykonán ve chvíli vzniku značky (či její registrace)</li>
		<li><code>attachedCallback</code> vykonán po připnutí do stromu</li>
		<li><code>detachedCallback</code> vykonán po odepnutí ze stromu</li>
		<li><code>attributeChangedCallback</code> vykonán při změně (přidání, odebrání) atributu</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: Shadow DOM</h2>
	<ul>
		<li>Technika "odstínění" podstromu od zbytku stránky</li>
		<li>Myšlenka: DOM widgetu nemá okolí co zajímat</li>
		<li>Zamezení interference JS a CSS</li>
		<li>Problém: má být widget listem stromu?</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: realizace Shadow DOM</h2>
	<ul>
		<li>Pro libovolný uzel DOMu lze vytvořit tzv. <em>shadow root</em> (potomek DocumentFragment)</li>
		<li>Shadow root může obsahovat libovolně složitý podstrom</li>
		<li>Zvenčí shadow root není vidět</li>
		<li>Omezení CSS a JS událostí</li>
		<li>Připínání potomků do uzlu se shadow rootem způsobí jejich <em>(re)distribuci</em></li>
		<li><a href="http://w3c.github.io/webcomponents/spec/shadow/index.html">Speficikace</a></li>
		<li><a href="example/1.html" target="_blank">Ukázka</a></li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: &lt;slot&gt;</h2>
	<ul>
		<li>Nová HTML značka užitečná jen pro Shadow DOM</li>
		<li>Určuje místo, do kterého se připnou prvky zvenčí umístěné do Shadow host</li>
		<li>Uživatel appenduje do Shadow host, renderer vykresluje do &lt;slot&gt;</li>
		<li>Jeden Shadow DOM může mít více značek &lt;slot&gt;</li>
		<li><a href="http://w3c.github.io/webcomponents/assets/images/distribution.svg" target="_blank">Obrázek</a></li>
	</ul>
</section>


<section class="slide">
	<h2>Prostor pro otázky</h2>
</section>

<footer>
	<a href="http://twitter.com/0ndras">twitter.com/0ndras</a>
	<a href="mailto:ondrej.zara@firma.seznam.cz">ondrej.zara@firma.seznam.cz</a>
</footer>

<script type="text/javascript">
	Syntax.all();
	new Presentation();
</script>

</body>
</html>
