<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,user-scalable=0" />
		<title>Bleeding edge</title>
	<body>

<h1>Bleeding edge</h1>

<section class="slide">
	<h2>Bleeding edge</h2>
	<ul>
		<li>Webová interaktivní prezentace</li>
		<li>"?" zobrazí krátkou nápovědu</li>
		<li>Tisk jako obvykle</li>
		<li>Pro pokračování stiskněte mezerník</li>
	</ul>
</section>

<section class="slide">
	<h2>Obsah</h2>
	<ol>
		<li>CSS: Grid</li>
		<li>CSS: Custom Properties</li>
		<li>JS: Web Notifications</li>
		<li>JS: Web Components</li>
	</ol>
</section>

<section class="slide">
	<h2>CSS Grid</h2>
	<ul>
		<li>CSS Flexbox definuje <em>jednorozměrný</em> layout</li>
		<li>CSS Grid je korespondující technologie pro <em>dvourozměrný</em> layout</li>
		<li>Novinka, nicméně rychlá adopce</li>
		<li>Ohromné množství nových konceptů a vlastností</li>
	</ul>
</section>

<section class="slide">
	<h2>CSS Grid &ndash; koncepty</h2>
	<ul>
		<li>Rodič má <code>display: grid</code></li>
		<li>Přímí potomci jsou rozmístěni <em>na mřížce</em></li>
		<li>Existuje několik variant definice mřížky</li>
		<li>Potomci se mohou překrývat či zabírat mnoho polí mřížky</li>
	</ul>
</section>

<section class="slide">
	<h2>CSS Grid &ndash; terminologie</h2>
	<ul>
		<li><em>Grid track</em> je sloupec či řádka mřížky</li>
		<li><em>Grid line</em> je (neviditelná) čára mezi tracky</li>
		<li>Jednotka <em>fr</em> je jeden díl nerozděleného místa (paralela s <code>flex</code>)</li>
	</ul>
</section>

<section class="slide">
	<h2>CSS Grid &ndash; definice mřížky</h2>
	<ul>
		<li>Tracky lze definovat explicitně, nebo automaticky podle počtu potomků</li>
		<li><em>Grid line</em> je (neviditelná) čára mezi tracky</li>
		<li>Jednotka <em>fr</em> je jeden díl nerozděleného místa (paralela s <code>flex</code>)</li>
	</ul>

	<code class="block" data-syntax="css">.parent {
	grid-template-columns: 500px 1fr 2fr;
	grid-template-rows: first-line 1fr second-line 1fr third-line;
}</code>
</section>

<section class="slide">
	<h2>CSS Grid &ndash; definice ploch</h2>
	<ul>
		<li>Alternativně lze tracky definovat <em>vizuálně</em> pomocí pojmenovaných ploch</li>
	</ul>

	<code class="block" data-syntax="css">.parent {
	grid-template-areas:
		"....... header  header"
		"sidebar content content";
}</code>
</section>

<section class="slide">
	<h2>CSS Grid &ndash; pozicování na mřížce</h2>
	<ul>
		<li>Pomocí pojmenovaných ploch</li>
		<li>Pomocí tracků</li>
		<li>Pomocí (pojmenovaných) grid lines</li>
		<li>Výchozí rozměr je jedna buňka mřížky</li>
	</ul>

	<code class="block" data-syntax="css">.child {
	grid-column-start: 1; 
	grid-column-end: 4; 
	grid-row: 2; 
	grid-area: sidebar;
}</code>
</section>

<section class="slide">
	<h2>CSS Grid &ndash; ostatní</h2>
	<ul>
		<li><a href="http://gridbyexample.com/">Grid by Example</a></li>
		<li><a href="https://www.mozilla.org/en-US/developer/css-grid/">Web Firefoxu o Gridu</a></li>
		<li>Firefox devtools Grid Highlighter</li>
	</ul>
</section>

<section class="slide">
	<h2>CSS3 Custom Properties</h2>
	<code class="block" data-syntax="css">body {
	--main-bg-color: brown;
}

div {
	background-color: var(--main-bg-color);
}

a {
	/* default value */
	background-color: var(--main-bg-color, red);
}
</code>
</section>

<section class="slide">
	<h2>CSS3 Custom Properties</h2>
	<ul>
		<li>Někdy nazýváno <em>CSS Variables</em></li>
		<li>Shodné chování s ostatními vlastnostmi (kaskáda)</li>
		<li>Druhý parametr funkce <code>var()</code> je výchozí hodnota, pokud by vlastnost neexistovala</li>
		<li>Hodnoty lze měnit za běhu (JS API, media queries, &hellip;)</li>
	</ul>
</section>

<section class="slide">
	<h2>CSS3 Custom Properties</h2>
	<ul>
		<li>Nelze polyfillovat ani preprocessovat &ndash; hodnoty se v čase mění</li>
		<li>Užitečné pro <em>skinování</em></li>
		<li>Užitečné pro modularizaci a izolaci CSS komponent</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Notifications</h2>
	<ul>
		<li>Zobrazení upozornění na úrovni OS</li>
		<li>Spolupráce s notifikačním systémem OS</li>
		<li>Agresivní; nutný souhlas uživatele</li>
		<li><code data-syntax="js">var notification = new Notification(title, options)</code></li>
	</ul>
</section>

<section class="slide">
	<h2>Web Notifications</h2>
	<ul>
		<li>Options: jazyk, tělíčko, ikona</li>
		<li>Notifikace generuje události, lze ji programově zavřít</li>
		<li>Souhlas uživatele lze získat asynchronním voláním <code>Notification.requestPermission</code></li>
		<li><a target="_blank" href="https://developer.mozilla.org/en/docs/Web/API/notification">Ukázka na MDN</a></li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components</h2>
	<ul>
		<li>Souhrnný termín pro čtveřici oddělených standardů</li>
		<li>Fungují nezávisle, ale jsou cíleně navrhovány pro společné použití</li>
		<li>Silně experimentální</li>
		<li>Do roku ~2016 verze 0, od roku ~2016 znatelně odlišná verze 1; <a href="https://hayato.io/2016/shadowdomv1/">výčet rozdílů</a></li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: &lt;template&gt;</h2>
	<code class="block" data-syntax="xml">&lt;template&gt;
	&lt;div class="person"&gt;&lt;img /&gt;&lt;/div&gt;
	&lt;script&gt;new Person(...)&lt;/script&gt;
&lt;/template&gt;
</code>
	<ul>
		<li>Dle slov autorů <em>něco jako chytřejší &lt;script type="custom"&gt;</em></li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: &lt;template&gt;</h2>
	<code class="block" data-syntax="js">var template = document.querySelector("template");
var parent = document.body;

parent.appendChild(template.content.cloneNode(true));</code>
	<ul>
		<li>"Mrtvý" prvek; má DOM, ale nevykonávají se skripty a nestahují se externí média</li>
		<li>DOM API: template má vlastnost <code>content</code>, což je DocumentFragment</li>
		<li>Vnitřek template musí být parsovatelné HTML, ale jeho forma není předepsaná</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: HTML imports</h2>
	<code class="block" data-syntax="xml">&lt;head&gt;
	&lt;link rel="import" href="/path/to/stuff.html" /&gt;
&lt;/head&gt;
</code>
	<ul>
		<li>Paralela pro CSS <code>@import</code></li>
		<li>Podléhá CORS</li>
		<li>Prohlížeč inteligentně deduplikuje</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: HTML imports</h2>
	<ul>
		<li>Každý importovaný soubor tvoří samostatný DOM dokument</li>
		<li>Na rozdíl od <code>&lt;template&gt;</code> je živý a skripty v něm se vykonávají</li>
		<li>Importovaný obsah se nikam automaticky nepřipojuje</li>
		<li>Rodič (ručně) připojuje importovaný obsahu (či naopak)</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: využití HTML imports</h2>
	<ul>
		<li>Zapouzdření libovolně objemné fcionality</li>
		<li>Widgety, komponenty aplikace, moduly, &hellip;</li>
		<li>Vhodné i pro import čistě JS-based komponent</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: Custom Elements</h2>
	<p>
	<code class="block" data-syntax="xml">&lt;szn-map x="..." y="..." controls="keyboard mouse zoom pan" /&gt;</code>
	</p><p>
	<code class="block" data-syntax="js">var map1 = new SznMap({x:..., y:..., control: ...});
var map2 = document.createElement("szn-map");

document.body.appendChild(map1);
map1.appendChild(map2);
</code></p>
</section>

<section class="slide">
	<h2>Web Components: Custom Elements &ndash; define</h2>
	<ul>
		<li>JS API tvořeno jedinou funkcí: <br/> <code data-syntax="js">customElements.define("szn-map", SznMap);</code></li>
		<li>Vlastní značky musí mít v názvu pomlčku (dopředná kompatibilita)</li>
		<li>Značka s pomlčkou v názvu je tzv. <em>unresolved element</em> (<code>instanceof HTMLElement</code>), dokud nedojde k registraci</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: Custom Element class</h2>
	<ul>
		<li>Třída (druhý parametr <code>customElements.define</code>) popisuje chování značky</li>
		<li>Rozšiřuje (<code>extends</code>) nějakou existující HTML značku</li>
		<li>Může obsahovat tzv. <em>lifecycle callbacks</em></li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: filecycle callbacks</h2>
	<code class="block" data-syntax="js">class MyElements extends HTMLElement {
	constructor() { super(); }
	attributeChangedCallback(name, oldValue, newValue) {}
	connectedCallback() {}
	disconnectedCallback () {}
	adoptedCallback() {}
}</code>
</section>

<section class="slide">
	<h2>Web Components: Shadow DOM</h2>
	<ul>
		<li>Technika "odstínění" podstromu od zbytku stránky</li>
		<li>Myšlenka: DOM widgetu nemá okolí co zajímat</li>
		<li>Zamezení interference JS a CSS</li>
		<li>Problém: má být widget listem stromu?</li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: realizace Shadow DOM</h2>
	<ul>
		<li>Pro libovolný uzel DOMu lze vytvořit tzv. <em>shadow root</em> (potomek DocumentFragment)</li>
		<li>Shadow root může obsahovat libovolně složitý podstrom</li>
		<li>Zvenčí shadow root není vidět</li>
		<li>Omezení CSS a JS událostí</li>
		<li>Připínání potomků do uzlu se shadow rootem způsobí jejich <em>(re)distribuci</em></li>
		<li><a href="http://w3c.github.io/webcomponents/spec/shadow/index.html">Speficikace</a></li>
		<li><a href="example/1.html" target="_blank">Ukázka</a></li>
	</ul>
</section>

<section class="slide">
	<h2>Web Components: &lt;slot&gt;</h2>
	<ul>
		<li>Nová HTML značka užitečná jen pro Shadow DOM</li>
		<li>Určuje místo, do kterého se připnou prvky zvenčí umístěné do Shadow host</li>
		<li>Uživatel appenduje do Shadow host, renderer vykresluje do <code>&lt;slot&gt;</code></li>
		<li>Jeden Shadow DOM může mít více značek <code>&lt;slot&gt;</code></li>
		<li><a href="http://w3c.github.io/webcomponents/assets/images/distribution.svg" target="_blank">Obrázek</a></li>
	</ul>
</section>


<section class="slide">
	<h2>Prostor pro otázky</h2>
</section>

<footer>
	<a href="http://twitter.com/0ndras">twitter.com/0ndras</a>
	<a href="mailto:ondrej.zara@firma.seznam.cz">ondrej.zara@firma.seznam.cz</a>
</footer>

<script src="../../jsslides/v3/slides/slides3.js"></script>
<script>
	Slides.modules.skin = "cvut";
	Slides.modules.numbering = false;
</script>

</body>
</html>
